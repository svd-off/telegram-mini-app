<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Городской транспорт</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box;}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Helvetica,Arial,sans-serif;background:#000;color:#FFF;height:100vh;overflow:hidden;display:flex;flex-direction:column;}
        .page{display:none;flex:1;flex-direction:column;}
        .page.active{display:flex;}
        .container{padding:16px;flex:1;display:flex;flex-direction:column;}

        /* Ввод кода */
        #codeInputPage .header{text-align:center;margin:32px 0 40px;}
        #codeInputPage .header img{width:28px;height:28px;vertical-align:middle;margin-right:8px;}
        #codeDisplay{display:flex;justify-content:center;gap:12px;margin-bottom:40px;}
        .box{width:50px;height:64px;border:2px solid #333;border-radius:12px;background:#111;display:flex;align-items:center;justify-content:center;font-size:32px;font-weight:600;}
        .box.filled{background:#FFF;color:#000;border-color:#FFF;}

        .keyboard{border:2px solid #FFF;border-radius:20px;padding:20px;background:#000;}
        .row{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-bottom:16px;}
        .row:last-child{margin-bottom:0;}
        .key{background:#FFF;color:#000;border-radius:16px;height:70px;font-size:30px;font-weight:600;display:flex;align-items:center;justify-content:center;cursor:pointer;}
        .key:active{opacity:0.7;transform:scale(0.97);}
        .action{background:#222;color:#FFF;}
        .action img{width:28px;height:28px;filter:invert(1);}

        /* Финальный билет */
        #finalTicketPage{background:#000;padding-top:20px;}
        .timer{font-size:28px;text-align:center;margin-bottom:30px;font-weight:600;}
        .ticket-num{display:flex;align-items:center;justify-content:center;gap:12px;font-size:26px;font-weight:700;color:#FF3B30;margin-bottom:30px;position:relative;}
        .ticket-num::after{content:'';position:absolute;bottom:-12px;left:50%;transform:translateX(-50%);width:80px;height:3px;background:#FF3B30;border-radius:2px;}
        .close-btn{position:absolute;top:16px;right:16px;font-size:32px;cursor:pointer;}

        .info-row{display:flex;align-items:flex-start;gap:20px;padding:18px 0;border-bottom:1px solid #222;}
        .info-row:last-child{border-bottom:none;}
        .info-icon{width:36px;height:36px;flex-shrink:0;}
        .info-text{flex:1;}
        .label{font-size:14px;color:#AAA;margin-bottom:4px;}
        .value{font-size:18px;font-weight:600;}

        .close-final{background:#FF3B30;color:#FFF;text-align:center;padding:20px;border-radius:16px;margin-top:auto;font-size:20px;font-weight:600;cursor:pointer;}
        .close-final:active{opacity:0.8;}
    </style>
</head>
<body>

<div id="codeInputPage" class="page active">
    <div class="container">
        <div class="header">
            <img src="driver.png" alt="Водитель">
            <span style="font-size:18px;font-weight:600;">Введите код с наклейки</span>
        </div>

        <div id="codeDisplay">
            <div class="box"></div><div class="box"></div><div class="box"></div>
            <div class="box"></div><div class="box"></div><div class="box"></div>
        </div>

        <div class="keyboard">
            <div class="row">
                <div class="key" onclick="add('1')">1</div>
                <div class="key" onclick="add('2')">2</div>
                <div class="key" onclick="add('3')">3</div>
            </div>
            <div class="row">
                <div class="key" onclick="add('4')">4</div>
                <div class="key" onclick="add('5')">5</div>
                <div class="key" onclick="add('6')">6</div>
            </div>
            <div class="row">
                <div class="key" onclick="add('7')">7</div>
                <div class="key" onclick="add('8')">8</div>
                <div class="key" onclick="add('9')">9</div>
            </div>
            <div class="row">
                <div class="key action"><img src="scan.png" alt="Скан"></div>
                <div class="key" onclick="add('0')">0</div>
                <div class="key action" onclick="del()">←</div>
            </div>
        </div>
    </div>
</div>

<div id="finalTicketPage" class="page">
    <div class="container" style="position:relative;padding-top:50px;">
        <div class="close-btn" onclick="Telegram.WebApp.close()">✕</div>

        <div class="timer">Действует ещё: 14:58</div>

        <div class="ticket-num">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="#FF3B30" stroke-width="2.5"><rect x="3" y="3" width="18" height="18" rx="3"/><path d="M8 8h8M8 12h8M8 16h8"/></svg>
            <span>1 299 814 483</span>
        </div>

        <!-- Перевозчик -->
        <div class="info-row">
            <img src="carrier.png" class="info-icon" alt="Перевозчик">
            <div class="info-text">
                <div class="label">Перевозчик</div>
                <div class="value">ИП Галченкова Е. А.</div>
            </div>
        </div>

        <!-- Маршрут -->
        <div class="info-row">
            <img src="bus.png" class="info-icon" alt="Маршрут">
            <div class="info-text">
                <div class="label">Маршрут</div>
                <div class="value">7 • ст. Красноярск-Северный — ДК Кировский</div>
            </div>
        </div>

        <!-- Госномер -->
        <div class="info-row">
            <img src="bus.png" class="info-icon" alt="Автобус">
            <div class="info-text">
                <div class="label">Гос. номер</div>
                <div class="value">к378тв124</div>
            </div>
        </div>

        <!-- Стоимость -->
        <div class="info-row">
            <img src="rub.png" class="info-icon" alt="Стоимость">
            <div class="info-text">
                <div class="label">Стоимость</div>
                <div class="value">48 ₽</div>
            </div>
        </div>

        <!-- Дата покупки -->
        <div class="info-row">
            <img src="calendar.png" class="info-icon" alt="Дата">
            <div class="info-text">
                <div class="label">Дата покупки</div>
                <div class="value">26 ноября 2025</div>
            </div>
        </div>

        <!-- Время покупки -->
        <div class="info-row">
            <img src="clock.png" class="info-icon" alt="Время">
            <div class="info-text">
                <div class="label">Время покупки</div>
                <div class="value">14:27</div>
            </div>
        </div>

        <div class="close-final" onclick="Telegram.WebApp.close()">
            ЗАКРЫТЬ БИЛЕТ
        </div>
    </div>
</div>

<script>
const boxes = document.querySelectorAll('.box');
let code = '';

function add(num) {
    if (code.length < 6) {
        code += num;
        updateBoxes();
        if (code.length === 6) {
            setTimeout(() => {
                document.getElementById('codeInputPage').classList.remove('active');
                document.getElementById('finalTicketPage').classList.add('active');
            }, 400);
        }
    }
}

function del() {
    code = code.slice(0, -1);
    updateBoxes();
}

function updateBoxes() {
    boxes.forEach((box, i) => {
        if (i < code.length) {
            box.textContent = code[i];
            box.classList.add('filled');
        } else {
            box.textContent = '';
            box.classList.remove('filled');
        }
    });
}

// Имитация сканирования (просто для красоты)
document.querySelector('.action img').parentElement.onclick = () => {
    code = '123456';
    updateBoxes();
    setTimeout(() => {
        document.getElementById('codeInputPage').classList.remove('active');
        document.getElementById('finalTicketPage').classList.add('active');
    }, 600);
};
</script>

</body>
</html>
